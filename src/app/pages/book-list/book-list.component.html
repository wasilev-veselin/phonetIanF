<section class="page-list">
  <section class="hero-banner">
    <div class="page-list__header hero-banner__content">
      <div>
        <p class="page-list__eyebrow">A Song of Ice and Fire</p>
        <h1>Books catalog</h1>
        <p class="page-list__lede">
          Browse the available books, jump into the details, and mark your
          favorites to keep them handy.
        </p>
      </div>
      <div class="search">

        <input
          id="book-search"
          type="search"
          class="search__input"
          placeholder="search..."
          [value]="searchTerm()"
          #searchInput
          (input)="onSearch(searchInput.value)"
        />
      </div>
    </div>
  </section>

  @if (booksError(); as error) {
    <p>Error loading books: {{ error }}</p>
  } @else if (!booksLoading(); ) {
    <section class="book-card__grid">
      @for (book of filteredBooks(); track book.id) {
      <article class="card">
        <div class="card__header">
          <div>
            <p class="card__eyebrow">ISBN {{ book.isbn }}</p>
            <h2 class="card__title">{{ book.name }}</h2>
            <p class="card__muted">by {{ book.authors.join(', ') }}</p>
          </div>
          <button
            type="button"
            class="card__favorite"
            (click)="toggleFavorite(book)">
          â˜†
          </button>
        </div>

        <div class="card__meta">
          <span>{{ book.mediaType }}</span>
          <span>{{ book.numberOfPages }} pages</span>
          <span>Released {{ book.released | date : 'mediumDate' }}</span>
        </div>

        <p class="card__publisher">
          Published by {{ book.publisher }} in {{ book.country }}
        </p>

        <div class="card__actions">
          <a class="card__link"
            [routerLink]="['/books', book.id]">
            View details
          </a>
        </div>
      </article>
      }
    </section>
  } @else {
      <p class="card__empty-list">Loading books...</p>
  }
</section>
