<section class="page-list">
  <div class="page-list__header">
    <div>
      <p class="page-list__eyebrow">A Song of Ice and Fire</p>
      <h1>Books catalog</h1>
      <p class="page-list__lede">
        Browse the available books, jump into the details, and mark your favorites to keep
        them handy.
      </p>
    </div>
  </div>


  @if (books$ | async; as books) {
    <div class="book-grid">
      <section class="book-grid__list">
        <h2>Books</h2>
        <ul >
          @for (book of books; track book.id) {
            <li>
              <button type="button" (click)="selectBook(book.id)">
                <span >{{ book.name }}</span>
                <span >
                  <span>ISBN: {{ book.isbn }}</span>
                  <span>Released: {{ book.released | date: 'mediumDate' }}</span>
                </span>
              </button>
            </li>
          }
        </ul>
      </section>

      <section class="book-grid__details">
        <h2>Details</h2>
        @if (selectedBook$ | async; as selected) {
          <article>
            <h3>{{ selected.name }}</h3>
            <p><strong>Publisher:</strong> {{ selected.publisher }}</p>
            <p><strong>Media type:</strong> {{ selected.mediaType }}</p>
            <p><strong>Country:</strong> {{ selected.country }}</p>
            <p><strong>Pages:</strong> {{ selected.numberOfPages }}</p>
            <p><strong>Authors:</strong> {{ selected.authors.join(', ') }}</p>
            <p><strong>Released:</strong> {{ selected.released | date: 'mediumDate' }}</p>
          </article>
        } @else {
          <p>Select a book to view its details.</p>
        }
      </section>
    </div>
  } @else {
    <p>Loading books...</p>
  }

</section>
